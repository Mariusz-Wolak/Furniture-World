<aura:component description="FW_ProductsDiscountManagerResults" controller="FW_ProductsController"
                implements="flexipage:availableForAllPageTypes">

    <aura:attribute name="results" type="Object[]" access="global"/>
    <aura:attribute name="resultsFromSelectedPricebook" type="Object[]" access="global"/>
    <aura:attribute name="discountType" type="String" access="global"/>
    <aura:attribute name="discountValue" type="String" access="global"/>
    <aura:attribute name="pricebooksList" type="Object[]" access="global"/>
    <aura:attribute name="pricebookStartDate" type="String" access="global"/>
    <aura:attribute name="pricebookEndDate" type="String" access="global"/>
    <aura:attribute name="productsToDiscountList" type="Object[]" access="global"/>
    <aura:attribute name="standardPricebookId" type="String" access="global"/>
    <aura:attribute name="selectedPricebook" type="Object" access="global"/>

    <aura:registerEvent name="FW_ProductsDiscountManagerSelectAllEvent" type="c:FW_ProductsDiscountManagerSelectAllEvent"/>
    <aura:registerEvent name="FW_SendProductsFromPricebook" type="c:FW_SendProductsFromPricebook"/>

    <aura:handler name="init" value="{!this}" action="{!c.onInit}"/>
    <aura:handler name="FW_SendProductsToDiscountManager" event="c:FW_SendProductsToDiscountManager"
                  action="{!c.receiveSearchResults}"/>
    <aura:handler event="c:FW_ProductsDiscountManagerNewPricebook" action="{!c.receiveNewPricebook}"/>
    <aura:handler event="c:FW_SendUpdatedPricebook" action="{!c.updatePricebook}"/>
    <aura:handler name="FW_DiscountManagerProductToDiscountEvent" event="c:FW_DiscountManagerProductToDiscountEvent"
                  action="{!c.receiveProductToDiscount}"/>
    <aura:handler event="c:FW_SelectedPricebook" action="{!c.selectPricebook}"/>
    <aura:handler event="c:FW_SendProductToPricebook" action="{!c.addProductToPricebookList}"/>
    <aura:handler event="c:FW_SendRemovedProductFromPricebook" action="{!c.removeProductFromPricebook}"/>
    <aura:handler event="c:FW_SendDeletedPricebook" action="{!c.receiveDeletedPricebook}"/>


    <aura:if isTrue="{!v.selectedPricebook}">
        <lightning:card class="card">
                <h1 class="header slds-align_absolute-center">{!v.selectedPricebook.Name} (
                    <ui:outputDate value="{!v.selectedPricebook.StartDate__c}"/>
                    &nbsp; - &nbsp;
                    <ui:outputDate
                            value="{!v.selectedPricebook.EndDate__c}"/>
                    )
                </h1>

            <aura:if isTrue="{!not(empty(v.resultsFromSelectedPricebook))}">
                <div class="optionsDiv">
<!--                    <div class="inlineDiv">-->
<!--                        <ui:inputCheckbox aura:id="selectAllCheckbox" change="{!c.selectAll}"/>-->
<!--                    </div>-->
<!--                    <div class="checkboxLabel">-->
<!--                        {!$Label.c.Select_All}-->
<!--                    </div>-->
                    <div class="inlineDiv discountOptionDiv">
                        <lightning:input value="{!v.discountValue}" placeholder="{!$Label.c.Discount_Value}" onchange="{!c.compute}"
                                         label="{!$Label.c.Discount_Value}"/>
                    </div>
                    <div class="inlineDiv discountOptionDiv">
                        <lightning:select aura:id="discountType" onchange="{!c.compute}" label="{!$Label.c.Discount_Type}">
                            <option value="%">%</option>
                            <option value="{!$Label.c.Raw}">{!$Label.c.Raw}</option>
                        </lightning:select>
                    </div>

                    <div class="inlineDiv buttonSetPrices">
                        <lightning:button label="{!$Label.c.Save}" onclick="{!c.setDiscount}"/>
                    </div>

<!--                    <div class="inlineDiv buttonSetPrices">-->
<!--                        <lightning:button label="Remove selected" onclick="{!c.setDiscount}"/>-->
<!--                    </div>-->
                </div>

                <div class="scroll slds-scrollable_y" style="display: block; clear: both">
                    <aura:iteration items="{!v.resultsFromSelectedPricebook}" var="product">
                        <c:FW_ProductsDiscountManagerSingleResult aura:id="singleProduct" product="{!product}"/>
                    </aura:iteration>
                </div>
                <aura:set attribute="else">
                    <div class="noResultsInfo slds-align_absolute-center">
                        {!$Label.c.No_Product_Associated_With_This_Pricebook_Have_Been_Found}.
                    </div>
                </aura:set>
            </aura:if>


            <!--        <div class="slds-grid">-->
            <!--            <div class="slds-col slds-size_7-of-12">-->
            <!--                <h1 class="header">{!$Label.c.Set_Discount}</h1>-->

            <!--                <div class="infoDiv slds-grid slds-wrap">-->
            <!--                    <div class="slds-col slds-size_8-of-12"/>-->
            <!--                    <div class="slds-col slds-size_2-of-12">-->
            <!--                        <lightning:input value="{!v.discountValue}" placeholder="{!$Label.c.Value}" onchange="{!c.compute}"-->
            <!--                                         label="{!$Label.c.Value}"/>-->
            <!--                    </div>-->
            <!--                    <div class="slds-col slds-size_2-of-12">-->
            <!--                        <lightning:select aura:id="discountType" onchange="{!c.compute}" label="{!$Label.c.Type}">-->
            <!--                            <option value="%">%</option>-->
            <!--                            <option value="{!$Label.c.Raw}">{!$Label.c.Raw}</option>-->
            <!--                        </lightning:select>-->
            <!--                    </div>-->
            <!--                </div>-->

            <!--                <div class="infoDiv slds-grid">-->
            <!--                    <div class="slds-col slds-size_4-of-12">-->
            <!--                        <lightning:select aura:id="pricebooksSelect" onchange="{!c.getPricebook}" label="{!$Label.c.Pricebook}">-->
            <!--                            <aura:iteration items="{!v.pricebooksList}" var="pricebook">-->
            <!--                                <option value="{!pricebook.Id}" label="{!pricebook.Name}"/>-->
            <!--                            </aura:iteration>-->
            <!--                        </lightning:select>-->
            <!--                    </div>-->
            <!--                    <div class="slds-col slds-size_3-of-12">-->
            <!--                        <lightning:input value="{!v.pricebookStartDate}" placeholder="{!$Label.c.Start_Date}" disabled="true"-->
            <!--                                         label="{!$Label.c.Start_Date}"/>-->
            <!--                    </div>-->
            <!--                    <div class="slds-col slds-size_3-of-12">-->
            <!--                        <lightning:input value="{!v.pricebookEndDate}" placeholder="{!$Label.c.End_Date}" disabled="true"-->
            <!--                                         label="{!$Label.c.End_Date}"/>-->
            <!--                    </div>-->
            <!--                    <div class="button slds-col slds-size_2-of-12 slds-text-align_right">-->
            <!--                        <lightning:button label="{!$Label.c.Save}" onclick="{!c.setDiscount}"/>-->
            <!--                    </div>-->
            <!--                </div>-->
            <!--            </div>-->


            <!--            <div class="slds-col slds-size_1-of-12"/>-->

            <!--            <div class="searchBarDiv slds-col slds-size_4-of-12">-->
            <!--                <c:FW_ProductsDiscountManagerSearchBar aura:id="searchBar"/>-->
            <!--            </div>-->


            <!--        </div>-->


        </lightning:card>


        <aura:set attribute="else">
            <lightning:card>
                <div class="header slds-align_absolute-center">Select Price Book From The List</div>
            </lightning:card>
        </aura:set>

    </aura:if>

    <c:FW_CustomToast aura:id="customToast"/>
</aura:component>
